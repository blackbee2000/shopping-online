{"ast":null,"code":"import _defineProperty from\"/Users/macbok/Documents/linhtd/cfd-react-shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/macbok/Documents/linhtd/cfd-react-shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/macbok/Documents/linhtd/cfd-react-shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState}from\"react\";var phonePattern=/(84|0[3|5|7|8|9])+([0-9]{8})\\b/;var emailPattern=/^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;var urlPattern=/^(?:http(s)?:\\/\\/)?[\\w.-]+(?:\\.[\\w\\.-]+)+[\\w\\-\\._~:/?#[\\]@!\\$&'\\(\\)\\*\\+,;=.]+$/;export var useForm=function useForm(){var initValue=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var _useState=useState({initValue:initValue}),_useState2=_slicedToArray(_useState,2),form=_useState2[0],setForm=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var rules={};var handleInputChange=function handleInputChange(ev){var name=ev.currentTarget.name;var value=ev.currentTarget.value;setForm(_objectSpread(_objectSpread({},form),{},_defineProperty({},name,value)));};var validator=function validator(){var errObject={};for(var i in rules){var _form$i;var r=rules[i];if(r.required&&!form[i]){errObject[i]=\"*Vui lòng không để trống thông tin\";}if(r.patern){var _patern;var patern=r.patern;if(r.patern==='phone')patern=phonePattern;if(r.patern==='email')patern=emailPattern;if(r.patern==='url')patern=urlPattern;if(typeof patern['test']!=='undefined'&&!((_patern=patern)===null||_patern===void 0?void 0:_patern.test(form[i]))){errObject[i]=\"*Vui lòng nhập đúng định dạng\";}}if(r.min&&(typeof form[i]==='undefined'||form[i].length<r.min)){errObject[i]=\"Vui l\\xF2ng nh\\u1EADp l\\u1EDBn h\\u01A1n \".concat(r.min,\" k\\xFD t\\u1EF1\");}if(r.max&&((_form$i=form[i])===null||_form$i===void 0?void 0:_form$i.length)>r.max){errObject[i]=\"Vui l\\xF2ng nh\\u1EADp nh\\u1ECF h\\u01A1n \".concat(r.max,\" k\\xFD t\\u1EF1\");}}setError(errObject);return errObject;};function register(name,rule){if(rule){rules[name]=rule;}return{name:name,onChange:handleInputChange,value:form[name]};}function handleSubmit(callback){return function(ev){ev.preventDefault();var error=validator();if(Object.keys(error).length===0){callback(form);}setError(error);};}return{form:form,register:register,error:error,handleSubmit:handleSubmit};};","map":{"version":3,"sources":["/Users/macbok/Documents/linhtd/cfd-react-shop/src/cores/useForm.js"],"names":["useState","phonePattern","emailPattern","urlPattern","useForm","initValue","form","setForm","error","setError","rules","handleInputChange","ev","name","currentTarget","value","validator","errObject","i","r","required","patern","test","min","length","max","register","rule","onChange","handleSubmit","callback","preventDefault","Object","keys"],"mappings":"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","sourcesContent":["import { useState } from \"react\";\n\nconst phonePattern = /(84|0[3|5|7|8|9])+([0-9]{8})\\b/\nconst emailPattern = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/\nconst urlPattern = /^(?:http(s)?:\\/\\/)?[\\w.-]+(?:\\.[\\w\\.-]+)+[\\w\\-\\._~:/?#[\\]@!\\$&'\\(\\)\\*\\+,;=.]+$/\n\nexport const useForm = (initValue = {}) => {\n    const [form, setForm] = useState({initValue});\n    const [error, setError] = useState({});\n    const rules = {};\n      \n      const handleInputChange = (ev) => {\n        let name = ev.currentTarget.name;\n        let value = ev.currentTarget.value;\n        setForm({\n          ...form,\n          [name]: value,\n        })\n      }\n  \n      const validator = () => {\n        let errObject = {};\n        for(let i in rules){\n            let r = rules[i];\n            if(r.required && !form[i]){\n                errObject[i] = \"*Vui lòng không để trống thông tin\";\n            }\n            if(r.patern){\n                let patern = r.patern;\n                if(r.patern === 'phone') patern = phonePattern;\n                if(r.patern === 'email') patern = emailPattern;\n                if(r.patern === 'url') patern = urlPattern;\n\n                if(typeof patern['test'] !== 'undefined'  && !patern?.test(form[i])){\n                    errObject[i] = \"*Vui lòng nhập đúng định dạng\";\n                }\n            }\n\n            if(r.min && ( typeof form[i] === 'undefined' || form[i].length < r.min)){\n                errObject[i] = `Vui lòng nhập lớn hơn ${r.min} ký tự`;\n            }\n\n            if(r.max && form[i]?.length > r.max){\n                errObject[i] = `Vui lòng nhập nhỏ hơn ${r.max} ký tự`;\n            }\n        }\n        setError(errObject);\n        return errObject;\n    }\n\n    function register(name, rule){\n        if(rule){\n            rules[name] = rule;\n        }\n        return {\n            name,\n            onChange: handleInputChange,\n            value: form[name]\n        }\n    }\n\n    function handleSubmit(callback){\n        return (ev) =>{\n            ev.preventDefault();\n            let error = validator();\n            if(Object.keys(error).length === 0){\n                callback(form);\n            }\n            setError(error);\n        }\n    }\n\n    return {\n        form,\n        register,\n        error,\n        handleSubmit\n    }\n}"]},"metadata":{},"sourceType":"module"}