{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useState } from \"react\";\nconst phonePattern = /(84|0[3|5|7|8|9])+([0-9]{8})\\b/;\nconst emailPattern = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\nconst urlPattern = /^(?:http(s)?:\\/\\/)?[\\w.-]+(?:\\.[\\w\\.-]+)+[\\w\\-\\._~:/?#[\\]@!\\$&'\\(\\)\\*\\+,;=.]+$/;\nexport const useForm = (initValue = {}) => {\n  _s();\n\n  const [form, setForm] = useState({\n    initValue\n  });\n  const [error, setError] = useState({});\n  const rules = {};\n\n  const handleInputChange = ev => {\n    let name = ev.currentTarget.name;\n    let value = ev.currentTarget.value;\n    setForm({ ...form,\n      [name]: value\n    });\n  };\n\n  const validator = () => {\n    let errObject = {};\n\n    for (let i in rules) {\n      var _form$i;\n\n      let r = rules[i];\n\n      if (r.required && !form[i]) {\n        errObject[i] = \"*Vui lòng không để trống thông tin\";\n      }\n\n      if (r.patern) {\n        var _patern;\n\n        let patern = r.patern;\n        if (r.patern === 'phone') patern = phonePattern;\n        if (r.patern === 'email') patern = emailPattern;\n        if (r.patern === 'url') patern = urlPattern;\n\n        if (typeof patern['test'] !== 'undefined' && !((_patern = patern) === null || _patern === void 0 ? void 0 : _patern.test(form[i]))) {\n          errObject[i] = \"*Vui lòng nhập đúng định dạng\";\n        }\n      }\n\n      if (r.min && (typeof form[i] === 'undefined' || form[i].length < r.min)) {\n        errObject[i] = `Vui lòng nhập lớn hơn ${r.min} ký tự`;\n      }\n\n      if (r.max && ((_form$i = form[i]) === null || _form$i === void 0 ? void 0 : _form$i.length) > r.max) {\n        errObject[i] = `Vui lòng nhập nhỏ hơn ${r.max} ký tự`;\n      }\n    }\n\n    setError(errObject);\n    return errObject;\n  };\n\n  function register(name, rule) {\n    if (rule) {\n      rules[name] = rule;\n    }\n\n    return {\n      name,\n      onChange: handleInputChange,\n      value: form[name]\n    };\n  }\n\n  function handleSubmit(callback) {\n    return ev => {\n      ev.preventDefault();\n      let error = validator();\n\n      if (Object.keys(error).length === 0) {\n        callback(form);\n      }\n\n      setError(error);\n    };\n  }\n\n  return {\n    form,\n    register,\n    error,\n    handleSubmit\n  };\n};\n\n_s(useForm, \"cDM4TDhr/OYtbRC1ZskPw+U9zIY=\");","map":{"version":3,"sources":["/Users/macbok/Documents/linhtd/cfd-react-shop/src/cores/useForm.js"],"names":["useState","phonePattern","emailPattern","urlPattern","useForm","initValue","form","setForm","error","setError","rules","handleInputChange","ev","name","currentTarget","value","validator","errObject","i","r","required","patern","test","min","length","max","register","rule","onChange","handleSubmit","callback","preventDefault","Object","keys"],"mappings":"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","sourcesContent":["import { useState } from \"react\";\n\nconst phonePattern = /(84|0[3|5|7|8|9])+([0-9]{8})\\b/\nconst emailPattern = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/\nconst urlPattern = /^(?:http(s)?:\\/\\/)?[\\w.-]+(?:\\.[\\w\\.-]+)+[\\w\\-\\._~:/?#[\\]@!\\$&'\\(\\)\\*\\+,;=.]+$/\n\nexport const useForm = (initValue = {}) => {\n    const [form, setForm] = useState({initValue});\n    const [error, setError] = useState({});\n    const rules = {};\n      \n      const handleInputChange = (ev) => {\n        let name = ev.currentTarget.name;\n        let value = ev.currentTarget.value;\n        setForm({\n          ...form,\n          [name]: value,\n        })\n      }\n  \n      const validator = () => {\n        let errObject = {};\n        for(let i in rules){\n            let r = rules[i];\n            if(r.required && !form[i]){\n                errObject[i] = \"*Vui lòng không để trống thông tin\";\n            }\n            if(r.patern){\n                let patern = r.patern;\n                if(r.patern === 'phone') patern = phonePattern;\n                if(r.patern === 'email') patern = emailPattern;\n                if(r.patern === 'url') patern = urlPattern;\n\n                if(typeof patern['test'] !== 'undefined'  && !patern?.test(form[i])){\n                    errObject[i] = \"*Vui lòng nhập đúng định dạng\";\n                }\n            }\n\n            if(r.min && ( typeof form[i] === 'undefined' || form[i].length < r.min)){\n                errObject[i] = `Vui lòng nhập lớn hơn ${r.min} ký tự`;\n            }\n\n            if(r.max && form[i]?.length > r.max){\n                errObject[i] = `Vui lòng nhập nhỏ hơn ${r.max} ký tự`;\n            }\n        }\n        setError(errObject);\n        return errObject;\n    }\n\n    function register(name, rule){\n        if(rule){\n            rules[name] = rule;\n        }\n        return {\n            name,\n            onChange: handleInputChange,\n            value: form[name]\n        }\n    }\n\n    function handleSubmit(callback){\n        return (ev) =>{\n            ev.preventDefault();\n            let error = validator();\n            if(Object.keys(error).length === 0){\n                callback(form);\n            }\n            setError(error);\n        }\n    }\n\n    return {\n        form,\n        register,\n        error,\n        handleSubmit\n    }\n}"]},"metadata":{},"sourceType":"module"}